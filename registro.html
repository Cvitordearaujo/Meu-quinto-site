<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="card">
<h1>Criar Conta</h1>
<form id="registroForm">
<input type="text" id="usuario" placeholder="Usuário" required>
<input type="email" id="email" placeholder="Email" required>
<input type="password" id="senha" placeholder="Senha" required>
<div id="forcaSenha"></div>
<input type="password" id="confirmaSenha" placeholder="Confirmar Senha" required>
<div id="errorMsg"></div>
<button type="submit" class="btn">Registrar</button>
</form>
<a href="login.html" class="link">Já possui conta? Login</a>
<a href="index.html" class="link">Voltar</a>
</div>

<script>
const form = document.getElementById('registroForm');
const errorMsg = document.getElementById('errorMsg');
const forcaSenha = document.getElementById('forcaSenha');
const senhaInput = document.getElementById('senha');

function avaliarSenha(senha){
    let forca=0;
    if(senha.length>=6) forca++;
    if(/[A-Z]/.test(senha)) forca++;
    if(/[a-z]/.test(senha)) forca++;
    if(/\d/.test(senha)) forca++;
    if(/[\W_]/.test(senha)) forca++;
    return forca;
}

senhaInput.addEventListener('input',()=>{const f=avaliarSenha(senhaInput.value);if(f<=2){forcaSenha.textContent='Fraca';forcaSenha.className='fraca';}else if(f<=4){forcaSenha.textContent='Média';forcaSenha.className='media';}else{forcaSenha.textContent='Forte';forcaSenha.className='forte';}});

form.addEventListener('submit',function(e){
    e.preventDefault();
    errorMsg.textContent='';
    const usuario=document.getElementById('usuario').value.trim();
    const email=document.getElementById('email').value.trim();
    const senha=document.getElementById('senha').value;
    const confirmaSenha=document.getElementById('confirmaSenha').value;
    if(senha!==confirmaSenha){errorMsg.textContent='As senhas não coincidem!';return;}
    if(avaliarSenha(senha)<3){errorMsg.textContent='Senha fraca! Use letras, números e maiúsculas.';return;}
    let usuarios=JSON.parse(localStorage.getItem('usuarios'))||[];
    if(usuarios.find(u=>u.usuario===usuario)){errorMsg.textContent='Usuário já existe!';return;}
    usuarios.push({usuario,email,senha});
    localStorage.setItem('usuarios',JSON.stringify(usuarios));
    localStorage.setItem('usuarioLogado',usuario);
    window.location.href='home.html';
});
</script>
</body>
</html>